* Python 自学
** flask 学习过程中练手代码 
*** mongodb 基本连接
#+BEGIN_EXAMPLE
    运行环境: python3.5
    代码文件夹:mongodb_test  
    lib1(未使用ORM): pymongo, flask_script,  Manager
    lib2(使用ORM): flask_mongoengine, flask_script
    代码:mongodb_test 
#+END_EXAMPLE
*** mySQL 连接
***** mySQL 服务器启动命令
#+BEGIN_EXAMPLE
  $ mysql.server start
  $ mysql.server stop
  $ mysql.server restart
#+END_EXAMPLE
***** mySQL 连接服务器 
#+BEGIN_EXAMPLE
  $ mysql -u root -p
if have password , then enter....
  $ yourpassword

#+END_EXAMPLE
***** Change MySQL password
#+BEGIN_EXAMPLE

mysql> SET PASSWORD FOR 'tom'@'localhost' = PASSWORD('foobar');
mysql> FLUSH PRIVILEGES;
mysql> quit;

$ mysql -u tom -p
$ yourpassword

then login ok

#+END_EXAMPLE
***** mySQL 的ORM, json serialize
      #+BEGIN_EXAMPLE
       mysql_test 目录下： app.py, manager.py, modules.py 
       >>>python manager save
       ...
       >>> python manager query_all
      #+END_EXAMPLE
***** MySQL 中文乱码的solution
#+BEGIN_EXAMPLE

CREATE DATABASE mydb
  DEFAULT CHARACTER SET utf8
  DEFAULT COLLATE utf8_general_ci;
#+END_EXAMPLE
***** SqlAlchemy query 结果排序 desc
#+BEGIN_SRC python
class Hotnews(Resource):
    def get(self):
        from models import Pianonews
        return jsonify(pianonews = [item.serialize for item in Pianonews.query.order_by(desc(Pianonews.index))])
        #return jsonify(pianonews = [item.serialize for item in Pianonews.query.all()]) 


    def post(self):
        from models import Pianonews
        return jsonify(pianonews = [item.serialize for item in Pianonews.query.all()])
#+END_SRC
见 restful app.py文件
***** Mysql 更改表的Auto increment
#+BEGIN_SRC sql 
> ALTER TABLE `videoslist` CHANGE COLUMN `index` `index` INT(4) NOT NULL AUTO_INCREMENT;

or
> ALTER TABLE  `videoslist` ADD  `index` INT( 11 ) NOT NULL  PRIMARY KEY AUTO_INCREMENT FIRST
注意` ` 不是' '号
#+END_SRC
***** MySQL 的table名字区分大小写
#+BEGIN_SRC sql 
$: RENAME TABLE old_table TO new_table;
#+END_SRC
*** Restful Demo
**** 使用到：flask_restful, reqparse, abort, Api, Resource
代码文件夹：restful 
*** 图片下载 Demo
**** 使用到 request, send_from_directory, abort == 
    #+BEGIN_EXAMPLE
    文件夹:picture 
    图片资源:picture/images/*.png
    using this link  to download file http://localhost:5000/images/image2.png
    #+END_EXAMPLE

*** 图片链接json格式返回 
**** flask_restful, send_from_directory ==
#+BEGIN_EXAMPLE
代码文件夹：restful -> jsonrestful.py
图片资源: restful -> images/xxx.jpg ==
#+END_EXAMPLE

**** WSGI服务器Gunicorn 启动app 命令
#+BEGIN_EXAMPLE
$gunicorn -b 0.0.0.0:8080 yourapp:app
#+END_EXAMPLE
**** flask返回HTML5的视频
#+BEGIN_EXAMPLE
Browser未能正常播放
#+END_EXAMPLE
** python版本相关
*** virtualenv 下指定python版本
#+BEGIN_EXAMPLE
when create virtual environment, using shell command:
$ virtualenv --python=python2.7 venv
创建 venv
#+END_EXAMPLE
** scrapy初试 
*** 简单的豆瓣网爬取:tutorial
**** 使用scrapy, python2.7
#+BEGIN_EXAMPLE
$scrapy crawl dmoz  
在项目主目录下执行 
#+END_EXAMPLE
 
*** Meizi网站图片爬取：Meizitu
**** 使用scrapy， python2.7, requests 
#+BEGIN_EXAMPLE
$ scrapy crawl meizi
#+END_EXAMPLE
